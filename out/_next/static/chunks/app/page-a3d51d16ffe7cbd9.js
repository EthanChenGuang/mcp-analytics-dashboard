(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{47967:function(e,t,r){Promise.resolve().then(r.bind(r,21508))},21508:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),l=r(2265);let n="mcp-analytics-cache",o="mcp-analytics-cache-timestamp",s=[1e3,2e3,4e3],i=null;async function d(e,t,r){if(r.aborted)throw Error("Request was cancelled");let a=new AbortController,l=setTimeout(()=>a.abort(),t),n=()=>{a.signal.aborted||a.abort()};r.aborted||r.addEventListener("abort",n,{once:!0});try{let t=await fetch(e,{signal:a.signal,headers:{Accept:"application/json"}});return clearTimeout(l),r.aborted||r.removeEventListener("abort",n),t}catch(e){if(clearTimeout(l),r.aborted||r.removeEventListener("abort",n),r.aborted||e instanceof Error&&"AbortError"===e.name)throw Error("Request was cancelled");throw e}}async function c(e){let t,r;e?r=e:(i&&!i.signal.aborted&&i.abort(),r=(t=new AbortController).signal,i=t);let a=null;for(let e=0;e<3;e++){if(r.aborted)throw Error("Request was cancelled");try{let e=await d("/data/analytics-latest.json",1e4,r);if(!e.ok)throw Error("Failed to fetch analytics: ".concat(e.statusText));let t=await e.json();if(!(Array.isArray(t)&&t.every(e=>"object"==typeof e&&null!==e&&"string"==typeof e.timestamp&&"number"==typeof e.localCount&&e.localCount>=0&&"number"==typeof e.remoteCount&&e.remoteCount>=0&&"number"==typeof e.totalCount&&e.totalCount>=0&&"number"==typeof e.bothCount&&e.bothCount>=0&&"number"==typeof e.unknownCount&&e.unknownCount>=0)))throw Error("Invalid analytics data format");return localStorage.setItem(n,JSON.stringify(t)),localStorage.setItem(o,Date.now().toString()),t}catch(t){if(a=t,t instanceof Error&&("AbortError"===t.name||"Request was cancelled"===t.message))throw t;if(e<2){let t=s[e];await new Promise(e=>setTimeout(e,t))}}}let l=function(){let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}();if(l){let e=function(){let e=localStorage.getItem(o);return e?parseInt(e,10):null}(),t=Error("Unable to fetch latest analytics. Showing cached data from ".concat(e?new Date(e).toLocaleString():"unknown time","."));throw t.cachedData=l,t.isStale=!0,t}throw a||Error("Unable to connect to analytics service. Please try again later.")}var u=r(84927),m=r(39172),x=r(56942),h=r(65696),p=r(63070),y=r(74497),g=r(7641),b=r(86035),f=r(27742),w=r(47625),k=r(58336),v=r(56940),j=r(97059),C=r(62994),N=r(8147),S=r(22190),D=r(54061);function T(e){var t;let{data:r,filter:n,granularity:o}=e,[s,i]=(0,l.useState)(!1);(0,l.useEffect)(()=>{{i(document.documentElement.classList.contains("dark"));let e=new MutationObserver(()=>{i(document.documentElement.classList.contains("dark"))});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()}},[]);let d=r.map(e=>({date:function(e,t){switch(t){case"hourly":return(0,m.WU)(e,"HH:mm");case"daily":case"weekly":return(0,m.WU)(e,"MMM d");case"monthly":return(0,m.WU)(e,"MMM yyyy")}}(new Date(e.periodStart),o),localCount:e.localCount,remoteCount:e.remoteCount,totalCount:e.totalCount,bothCount:e.bothCount||0,unknownCount:e.unknownCount||0})),c=s?"#374151":"#e5e7eb",u=s?"#f3f4f6":"#111827",x={total:s?"#a855f7":"#9333ea",local:s?"#3b82f6":"#2563eb",remote:s?"#ec4899":"#db2777",both:s?"#10b981":"#059669",unknown:s?"#6b7280":"#4b5563"},h=(null===(t=Intl.DateTimeFormat("en",{timeZoneName:"short"}).formatToParts(new Date).find(e=>"timeZoneName"===e.type))||void 0===t?void 0:t.value)||"Local";return(0,a.jsx)(w.h,{width:"100%",height:400,children:(0,a.jsxs)(k.w,{data:d,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(v.q,{strokeDasharray:"3 3",stroke:c}),(0,a.jsx)(j.K,{dataKey:"date",stroke:u,style:{fontSize:"12px"},label:{value:"Time (".concat(h,")"),position:"insideBottom",offset:-5,style:{textAnchor:"middle",fill:u,fontSize:"11px"}}}),(0,a.jsx)(C.B,{stroke:u,style:{fontSize:"12px"}}),(0,a.jsx)(N.u,{contentStyle:{backgroundColor:s?"#1f2937":"#ffffff",border:"1px solid ".concat(c),borderRadius:"6px",color:u}}),(0,a.jsx)(S.D,{wrapperStyle:{color:u}}),"show-all"===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.x,{type:"monotone",dataKey:"totalCount",stroke:x.total,strokeWidth:2,dot:{fill:x.total,r:3},name:"Total Servers"}),(0,a.jsx)(D.x,{type:"monotone",dataKey:"localCount",stroke:x.local,strokeWidth:2,dot:{fill:x.local,r:3},name:"Local Servers"}),(0,a.jsx)(D.x,{type:"monotone",dataKey:"remoteCount",stroke:x.remote,strokeWidth:2,dot:{fill:x.remote,r:3},name:"Remote Servers"}),(0,a.jsx)(D.x,{type:"monotone",dataKey:"bothCount",stroke:x.both,strokeWidth:2,dot:{fill:x.both,r:3},name:"Both Types"}),(0,a.jsx)(D.x,{type:"monotone",dataKey:"unknownCount",stroke:x.unknown,strokeWidth:2,dot:{fill:x.unknown,r:3},name:"Unknown"})]}):(0,a.jsx)(D.x,{type:"monotone",dataKey:"local"===n?"localCount":"remote"===n?"remoteCount":"totalCount",stroke:"local"===n?x.local:"remote"===n?x.remote:x.total,strokeWidth:2,dot:{fill:"local"===n?x.local:"remote"===n?x.remote:x.total,r:4},name:"all"===n?"Total Servers":"local"===n?"Local Servers":"Remote Servers"})]})})}function M(e){let{children:t,loading:r,error:n,empty:o}=e,[s,i]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(r){let e=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(e)}i(!1)},[r]),r)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 w-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading analytics data..."}),s&&(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Fetching analytics data... This may take a moment."})]})}):n?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 w-full",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,a.jsx)("p",{className:"text-red-800 dark:text-red-200 font-medium",children:"Error loading data"}),(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:n})]})}):o?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 w-full",children:(0,a.jsx)("div",{className:"text-center p-4",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No analytics data available yet."})})}):(0,a.jsx)(a.Fragment,{children:t})}function E(e){let{value:t,onChange:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Server Type"}),(0,a.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"Total Servers"}),(0,a.jsx)("option",{value:"show-all",children:"Show All Types"}),(0,a.jsx)("option",{value:"local",children:"Local Only"}),(0,a.jsx)("option",{value:"remote",children:"Remote Only"})]})]})}function W(e){let{value:t,onChange:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Granularity"}),(0,a.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"hourly",children:"Hourly"}),(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"})]})]})}var L=r(89520);function O(e){let{startDate:t,endDate:r,onStartDateChange:l,onEndDateChange:n,minDate:o,maxDate:s}=e,i=t?new Date(t+"T00:00:00"):null,d=r?new Date(r+"T23:59:59"):null,c=o?new Date(o+"T00:00:00"):void 0,u=s?new Date(s+"T23:59:59"):void 0,x=e=>{let{value:t,onClick:r}=e;return(0,a.jsx)("input",{type:"text",value:t||"",onClick:r,readOnly:!0,placeholder:"mm/dd/yyyy",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors hover:border-purple-400 dark:hover:border-purple-500 cursor-pointer"})};return(0,a.jsxs)("div",{className:"flex flex-row items-end gap-3 sm:gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 min-w-[160px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date"}),(0,a.jsx)(L.ZP,{selected:i,onChange:e=>{e?l((0,m.WU)(e,"yyyy-MM-dd")):l(null)},minDate:c,maxDate:d||u,customInput:(0,a.jsx)(x,{}),dateFormat:"MM/dd/yyyy",placeholderText:"mm/dd/yyyy",className:"w-full",wrapperClassName:"w-full",popperClassName:"date-picker-popper"})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 min-w-[160px]",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date"}),(0,a.jsx)(L.ZP,{selected:d,onChange:e=>{e?n((0,m.WU)(e,"yyyy-MM-dd")):n(null)},minDate:i||c,maxDate:u,customInput:(0,a.jsx)(x,{}),dateFormat:"MM/dd/yyyy",placeholderText:"mm/dd/yyyy",className:"w-full",wrapperClassName:"w-full",popperClassName:"date-picker-popper"})]}),(t||r)&&(0,a.jsx)("div",{className:"flex items-end flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>{l(null),n(null)},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 underline transition-colors","aria-label":"Clear date range",children:"Clear"})})]})}function F(){var e,t,r;let[n,o]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[d,w]=(0,l.useState)(null),[k,v]=(0,l.useState)(null),[j,C]=(0,l.useState)("all"),[N,S]=(0,l.useState)("daily"),[D,L]=(0,l.useState)(null),[F,A]=(0,l.useState)(null),R=(0,l.useCallback)(async()=>{i(!0),w(null),v(null);try{let e=await c();o(e)}catch(t){let e=t instanceof Error?t.message:"Failed to load analytics data";if(e.toLowerCase().includes("cancelled")||e.toLowerCase().includes("aborted")||e.includes("AbortError")){console.log("Request cancelled (this is normal in development mode)");return}t.isStale&&t.cachedData?(o(t.cachedData),v(e)):(w(e),console.error("Error fetching analytics:",t))}finally{i(!1)}},[]);(0,l.useEffect)(()=>{let e=!0;return(async()=>{if(await R(),!e)return})(),()=>{e=!1}},[R]);let{minDate:U,maxDate:I}=(0,l.useMemo)(()=>{if(0===n.length)return{minDate:void 0,maxDate:void 0};let e=n.map(e=>new Date(e.timestamp).getTime()),t=new Date(Math.min(...e)),r=new Date(Math.max(...e)),a=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)};return{minDate:a(t),maxDate:a(r)}},[n]),K=(0,l.useMemo)(()=>D||F?n.filter(e=>{let t=new Date(e.timestamp),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return!(D&&r<new Date(D+"T00:00:00").getTime()||F&&r>new Date(F+"T23:59:59").getTime())}):n,[n,D,F]),P=(0,l.useMemo)(()=>(function(e,t){if(0===e.length)return[];let r=new Map;for(let a of e){let e,l;let n=new Date(a.timestamp);switch(t){case"hourly":l=(0,u.o)(n),e=(0,m.WU)(l,"yyyy-MM-dd'T'HH:mm:ss");break;case"daily":l=(0,x.b)(n),e=(0,m.WU)(l,"yyyy-MM-dd");break;case"weekly":l=(0,h.z)(n,{weekStartsOn:1}),e=(0,m.WU)(l,"yyyy-MM-dd");break;case"monthly":l=(0,p.N)(n),e=(0,m.WU)(l,"yyyy-MM")}r.has(e)||r.set(e,[]),r.get(e).push(a)}let a=[];for(let[,e]of r.entries()){let r,l;let n=new Date(e[0].timestamp);switch(t){case"hourly":r=(0,u.o)(n),l=(0,y.T)(n);break;case"daily":r=(0,x.b)(n),l=(0,g.i)(n);break;case"weekly":r=(0,h.z)(n,{weekStartsOn:1}),l=(0,b.v)(n,{weekStartsOn:1});break;case"monthly":r=(0,p.N)(n),l=(0,f.V)(n)}let o=e[e.length-1];a.push({periodStart:r.toISOString(),periodEnd:l.toISOString(),granularity:t,localCount:o.localCount,remoteCount:o.remoteCount,totalCount:o.totalCount,bothCount:o.bothCount,unknownCount:o.unknownCount,snapshotCount:e.length})}return a.sort((e,t)=>new Date(e.periodStart).getTime()-new Date(t.periodStart).getTime()),a})(K,N),[K,N]),H=(0,l.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(e.length<=t)return e;let r=Math.ceil(e.length/t),a=[];for(let t=0;t<e.length;t+=r)a.push(e[t]);return a[a.length-1]!==e[e.length-1]&&a.push(e[e.length-1]),a})(P,1e3),[P]),q=(0,l.useMemo)(()=>D||F?H.filter(e=>{let t=new Date(e.periodStart),r=new Date(e.periodEnd),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),l=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return!(D&&l<new Date(D+"T00:00:00").getTime()||F&&a>new Date(F+"T23:59:59").getTime())}):H,[H,D,F]);return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors",children:(0,a.jsxs)("div",{className:"container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-7xl",children:[(0,a.jsx)("header",{className:"mb-6 sm:mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"MCP Analytics Dashboard"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Model Context Protocol server statistics"})]}),(0,a.jsxs)("button",{onClick:R,disabled:s,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2","aria-label":"Refresh analytics data",children:[(0,a.jsx)("svg",{className:"w-4 h-4 ".concat(s?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),k&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:k})}),(0,a.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row flex-wrap gap-3 sm:gap-4 items-start lg:items-end",children:[(0,a.jsx)(E,{value:j,onChange:C}),(0,a.jsx)(W,{value:N,onChange:S}),(0,a.jsx)(O,{startDate:D,endDate:F,onStartDateChange:L,onEndDateChange:A,minDate:U,maxDate:I})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Server Count Over Time"}),(0,a.jsx)(M,{loading:s,error:d,empty:0===q.length,children:(0,a.jsx)(T,{data:q,filter:j,granularity:N})})]}),n.length>0&&(0,a.jsxs)("div",{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,a.jsx)("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Total Servers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(null===(e=n[n.length-1])||void 0===e?void 0:e.totalCount)||0})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Local Servers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:(null===(t=n[n.length-1])||void 0===t?void 0:t.localCount)||0})]}),(0,a.jsxs)("div",{className:"bg-pink-50 dark:bg-pink-900/20 rounded-lg p-4 border border-pink-200 dark:border-pink-800",children:[(0,a.jsx)("p",{className:"text-sm text-pink-600 dark:text-pink-400",children:"Remote Servers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:(null===(r=n[n.length-1])||void 0===r?void 0:r.remoteCount)||0})]})]})]})})}r(21005)}},function(e){e.O(0,[360,282,333,287,971,117,744],function(){return e(e.s=47967)}),_N_E=e.O()}]);